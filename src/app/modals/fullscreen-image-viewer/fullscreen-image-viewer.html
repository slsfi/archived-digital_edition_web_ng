<div class="full-page-modal">
    <div class="facsimile-button-group">
        <div class="action-buttons">
            <ion-fab class="horizontal-ion-fab">
                <ion-fab-button *ngIf="imageURLs.length > 1" size="small" (click)="previous()" title="Föregående bild" i18n-title="@@Read.Facsimiles.Previous">
                    <ion-icon name="arrow-back" aria-label="Föregående bild" i18n-aria-label="@@Read.Facsimiles.Previous"></ion-icon>
                </ion-fab-button>
                <ion-fab-button *ngIf="backsides.length > 0 && backsides[activeImageIndex]" size="small" (click)="showBackside = !showBackside" title="Visa/dölj frånsida" i18n-title="@@Read.Facsimiles.ToggleReverseSide">
                    <ion-icon name="repeat-outline" aria-label="Visa/dölj frånsida" i18n-aria-label="@@Read.Facsimiles.ToggleReverseSide"></ion-icon>
                </ion-fab-button>
                <ion-fab-button *ngIf="imageURLs.length > 1" size="small" (click)="next()" title="Följande bild" i18n-title="@@Read.Facsimiles.Next">
                    <ion-icon name="arrow-forward" aria-label="Följande bild" i18n-aria-label="@@Read.Facsimiles.Next"></ion-icon>
                </ion-fab-button>
                <ion-fab-button size="small" (click)="rotate()" title="Rotera" i18n-title="@@Read.Facsimiles.Rotate">
                    <ion-icon name="refresh-outline" aria-label="Rotera" i18n-aria-label="@@Read.Facsimiles.Rotate"></ion-icon>
                </ion-fab-button>
                <ion-fab-button *ngIf="!userSettingsService.isMobile()" size="small" (click)="zoomIn()" title="Zooma in" i18n-title="@@Read.Facsimiles.ZoomIn">
                    <ion-icon name="add-outline" aria-label="Zooma in" i18n-aria-label="@@Read.Facsimiles.ZoomIn"></ion-icon>
                </ion-fab-button>
                <ion-fab-button *ngIf="!userSettingsService.isMobile()" size="small" (click)="zoomOut()" title="Zooma ut" i18n-title="@@Read.Facsimiles.ZoomOut">
                    <ion-icon name="remove-outline" aria-label="Zooma ut" i18n-aria-label="@@Read.Facsimiles.ZoomOut"></ion-icon>
                </ion-fab-button>
                <ion-fab-button size="small" (click)="reset()" title="Återställ" i18n-title="@@Read.Facsimiles.Reset">
                    <ion-icon name="arrow-undo-outline" aria-label="Återställ" i18n-aria-label="@@Read.Facsimiles.Reset"></ion-icon>
                </ion-fab-button>
                <ion-fab-button *ngIf="(imageDescriptions && imageDescriptions[activeImageIndex]) || (imageTitles && imageTitles[activeImageIndex])" size="small" (click)="toggleImageDescription()" title="Visa/dölj beskrivning" i18n-title="@@Read.Facsimiles.ToggleDescription">
                    <ion-icon name="information-outline" aria-label="Visa/dölj beskrivning" i18n-aria-label="@@Read.Facsimiles.ToggleDescription"></ion-icon>
                </ion-fab-button>
                <ion-fab-button size="small" (click)="closeModal()" title="Stäng" i18n-title="@@BasicActions.Close">
                    <ion-icon name="close-outline" aria-label="Stäng" i18n-aria-label="@@BasicActions.Close"></ion-icon>
                </ion-fab-button>
            </ion-fab>
            <ion-input *ngIf="!userSettingsService.isMobile() && imageURLs.length > 1"
                        class="page-number-input"
                        fill="solid"
                        label="Bild:"
                        i18n-label="@@Read.Facsimiles.Page"
                        [helperText]="imageURLs.length ? '/ ' + imageURLs.length : ''"
                        type="number"
                        inputmode="numeric"
                        min="1"
                        [max]="imageURLs.length ? imageURLs.length : null"
                        (ionChange)="setImageNr($event)"
                        [(ngModel)]="inputImageNumber"
            ></ion-input>
        </div>
        <div *ngIf="(imageDescriptions && imageDescriptions[activeImageIndex]) || (imageTitles && imageTitles[activeImageIndex])" class="image-description" [class.visuallyhidden]="!showDescription">
            <span class="image-title" *ngIf="imageTitles && imageTitles[activeImageIndex]" [innerHTML]="imageTitles[activeImageIndex]"></span> <span *ngIf="imageDescriptions && imageDescriptions[activeImageIndex]" [innerHTML]="imageDescriptions[activeImageIndex]"></span>
        </div>
    </div>
    <div class="facsimile-image-wrapper">
        <img *ngIf="!userSettingsService.isMobile()"
            [src]="showBackside && backsides[activeImageIndex] ? getBacksideUrl(imageURLs[activeImageIndex]) : imageURLs[activeImageIndex]"
            alt="Skannat faksimil"
            i18n-alt="@@Read.Facsimiles.AltText"
            [ngStyle]="{'transform':'scale('+zoom+') translate3d('+prevX+'px, '+prevY+'px, 0px) rotate('+angle+'deg)', 'max-height':'calc(100vh - '+toolbarHeight+'px)'}"
            (wheel)="zoomWithMouseWheel($event)"
            [draggableImage]="[prevX, prevY]"
            [angle]="angle"
            [zoom]="zoom"
            (finalCoordinates)="setImageCoordinates($event)"
        >
        <pinch-zoom *ngIf="userSettingsService.isMobile()" overflow="visible" backgroundColor="transparent" [limit-zoom]="40" [minPanScale]="0">
            <img 
                [src]="showBackside && backsides[activeImageIndex] ? getBacksideUrl(imageURLs[activeImageIndex]) : imageURLs[activeImageIndex]"
                alt="Skannat faksimil"
                i18n-alt="@@Read.Facsimiles.AltText"
                [ngStyle]="{'transform':'rotate('+angle+'deg)', 'max-height':'calc(100vh - '+toolbarHeight+'px)'}"
            >
        </pinch-zoom>
    </div>
</div>
