<ion-header>
  <ion-toolbar>
    <ion-title i18n="@@DownloadTexts.Title">Ladda ner och skriv ut</ion-title>
    <ion-buttons slot="end">
      <ion-button class="close-button" fill="clear" (click)="dismiss()">
        <ion-icon name="close" slot="icon-only" aria-label="Stäng" i18n-aria-label="@@BasicActions.Close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="modal-inner-wrapper">
    <h2 [ngClass]="introductionMode ? 'introductionMode' : 'readTextsMode'">
      <span class="header-pub-title" [innerHTML]="publicationTitle"></span>
      <span class="header-coll-title" [innerHTML]="collectionTitle"></span>
    </h2>

    <p *ngIf="showLoadingError" class="errorMessage" i18n="@@DownloadTexts.TextLoadingError">Nedladdningen misslyckades. Vänligen försök igen och tillåt popup-fönster från webbplatsen.</p>
    <p *ngIf="showPrintError" class="errorMessage" i18n="@@DownloadTexts.OpenPrintError">Utskriftsversionen kunde inte öppnas i ett nytt fönster. Vänligen försök igen och tillåt popup-fönster från webbplatsen.</p>

    <div class="modal-inner-box">
      <div *ngIf="introductionMode && downloadFormatsIntro" class="dlt-group">
        <h3 i18n="@@introduction">Inledning</h3>
        <ion-buttons class="download-buttons">
          <ion-button *ngIf="downloadFormatsIntro['xml']"
                class="custom-button"
                (click)="initiateDownload('intro', 'xml')"
                i18n="@@DownloadTexts.Format.XML"
          >XML</ion-button>
          <ion-button *ngIf="downloadFormatsIntro['txt']"
                class="custom-button"
                (click)="initiateDownload('intro', 'txt')"
                i18n="@@DownloadTexts.Format.TXT"
          >TXT</ion-button>
          <ion-button *ngIf="downloadFormatsIntro['print']"
                class="custom-outline-button"
                fill="outline"
                (click)="openPrintFriendlyText('intro')"
                i18n="@@DownloadTexts.Format.Print"
          >Utskrift</ion-button>
          <ion-spinner *ngIf="loadingIntro" class="loading" name="crescent"></ion-spinner>
        </ion-buttons>
      </div>

      <div *ngIf="readTextsMode && downloadFormatsEst" class="dlt-group">
        <h3 i18n="@@Read.Established.Title">Lästext</h3>
        <ion-buttons class="download-buttons">
          <ion-button *ngIf="downloadFormatsEst['xml']"
                class="custom-button"
                (click)="initiateDownload('est', 'xml')"
                i18n="@@DownloadTexts.Format.XML"
          >XML</ion-button>
          <ion-button *ngIf="downloadFormatsEst['txt']"
                class="custom-button"
                (click)="initiateDownload('est', 'txt')"
                i18n="@@DownloadTexts.Format.TXT"
          >TXT</ion-button>
          <ion-button *ngIf="downloadFormatsEst['print']"
                class="custom-outline-button"
                fill="outline"
                (click)="openPrintFriendlyText('est')"
                i18n="@@DownloadTexts.Format.Print"
          >Utskrift</ion-button>
          <ion-spinner *ngIf="loadingEst" class="loading" name="crescent"></ion-spinner>
        </ion-buttons>
      </div>

      <div *ngIf="readTextsMode && downloadFormatsCom" class="dlt-group">
        <h3 i18n="@@Read.Comments.Title">Kommentarer</h3>
        <ion-buttons class="download-buttons">
          <ion-button *ngIf="downloadFormatsCom['xml']"
                class="custom-button"
                (click)="initiateDownload('com', 'xml')"
                i18n="@@DownloadTexts.Format.XML"
          >XML</ion-button>
          <ion-button *ngIf="downloadFormatsCom['txt']"
                class="custom-button"
                (click)="initiateDownload('com', 'txt')"
                i18n="@@DownloadTexts.Format.TXT"
          >TXT</ion-button>
          <ion-button *ngIf="downloadFormatsCom['print']"
                class="custom-outline-button"
                fill="outline"
                (click)="openPrintFriendlyText('com')"
                i18n="@@DownloadTexts.Format.Print"
          >Utskrift</ion-button>
          <ion-spinner *ngIf="loadingCom" class="loading" name="crescent"></ion-spinner>
        </ion-buttons>
      </div>

      <div *ngIf="instructionsText || copyrightText" class="notice">
        <p *ngIf="instructionsText" class="download-instructions" [innerHTML]="instructionsText"></p>
        <p *ngIf="copyrightText && !copyrightURL" class="copyright-notice" [innerHTML]="copyrightText"></p>
        <p *ngIf="copyrightText && copyrightURL" class="copyright-notice">
          <a [href]="copyrightURL" target="_blank">
            <span [innerHTML]="copyrightText"></span>
            <ion-icon name="open-outline"
                  [ngStyle]="{
                    'font-size': '1.375rem',
                    'padding-left': '0.125rem',
                    'vertical-align': 'text-bottom'
                  }"
                  aria-label="Länken öppnas i ett nytt fönster"
                  i18n-aria-label="@@BasicActions.OpenInNewWindow"
            ></ion-icon>
          </a>
        </p>
      </div>
    </div>
  </div>
</ion-content>
