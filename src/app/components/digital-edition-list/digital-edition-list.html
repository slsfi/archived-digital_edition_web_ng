<!-- The old template had different layout types (auto/grid/list) which are used in different scenarios (e.g. list for mobile), but this should work decently in most cases. -->
  <ion-grid>
    <ion-row>
      <ion-col size="12" size-sm="6" size-md="4" size-xl="3" *ngFor="let edition of digitalEditions">
        <ion-card class="digital-edition">
          <ion-card-header class="digital-edition-list-card-header" [ngClass]="edition.isDownload ? 'download-only-edition' : ''">
            <a routerLink="{{'/' + edition.type | initialPathGenerator: edition.id}}" title="{{edition.title}}">
              <img [ngClass]="edition.isDownload ? 'download-only-edition' : ''"
                    src="{{editionImages[edition.id] ? (editionImages[edition.id]).replace('.','_thumb.') : (editionImages.default).replace('.','_thumb.')}}"
                    alt="{{edition.title}}"
                    loading="lazy"
              >
            </a>
            <div class="corner-download-icon"><ion-icon *ngIf="edition.isDownload" name="download"></ion-icon></div>
          </ion-card-header>
          <ion-card-content class="digital-edition-list-card-content">
            <h2>{{ edition.title }}</h2>
            <div class="book_download_container">
              <ion-button class="download_link" *ngIf="edition.type === 'pdf'" (click)="downloadBook($event, edition, 'pdf')">PDF</ion-button>
              <ion-button class="download_link" *ngIf="edition.type === 'epub'" (click)="downloadBook($event, edition, 'epub')">EPUB</ion-button>
            </div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
<!--
<div *ngIf="layoutType == 'auto'">
  <ion-grid *ngIf="userSettingsService.isTablet()">
    <ion-row>
      <ion-col style="display: flex; justify-content: center;" *ngFor="let edition of digitalEditions" menuClose
      col-sm-12 col-md-6 col-xl-4 col-xxl-3 col-xxxl-2 (click)="openCollection(edition, false)">
        <ion-card class="digital-edition"
          style="padding: 20px; position: relative; background-color: white;">
          <ion-card-header class="digital-edition-list-card-header">
            <img
              src="{{editionImages[edition.id] ? (editionImages[edition.id]).replace('.','_thumb.') : (editionImages.default).replace('.','_thumb.')}}" loading="lazy">
            <ion-icon class="download" *ngIf="edition.isDownload" name="download">
            </ion-icon>
          </ion-card-header>
          <ion-card-content class="digital-edition-list-card-content">
            <div style="background-color: white; text-align: center;">
              <h2>{{ ('TOC-translation.' + edition.title | translate) !== 'TOC-translation.' + edition.title  ?  ('TOC-translation.' + edition.title | translate) : edition.title }}</h2>
              <div class="book_download_container">
                <div class="download_link"><p class="download_pdf" *ngIf="edition['pdf']" (click)="downloadBook($event, edition, 'pdf')">PDF</p></div>
                <div class="download_link"><p class="download_epub" *ngIf="edition['epub']" (click)="downloadBook($event, edition, 'epub')">EPUB</p></div>
              </div>
            </div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-grid *ngIf="userSettingsService.isMobile() && !userSettingsService.isTablet()" class="grid-mobile">
    <ion-row>
      <ion-col class="col-mobile">
        <ion-list class="item-white">
          <ion-item *ngFor="let edition of digitalEditions" menuClose (click)="openCollection(edition, true)">
            <ion-thumbnail item-left>
              <img
                src="{{editionImages[edition.id] ? (editionImages[edition.id]).replace('.','_thumb.') : (editionImages.default).replace('.','_thumb.')}}" loading="lazy">
              <ion-icon class="download" *ngIf="edition.isDownload"
                name="download"></ion-icon>
            </ion-thumbnail>
            <h2>{{ ('TOC-translation.' + edition.title | translate) !== 'TOC-translation.' + edition.title  ?  ('TOC-translation.' + edition.title | translate) : edition.title }}</h2>
            <div class="book_download_container">
                <div class="download_link"><p class="download_pdf" *ngIf="edition['pdf']" (click)="downloadBook($event, edition, 'pdf')">PDF</p></div>
                <div class="download_link"><p class="download_epub" *ngIf="edition['epub']" (click)="downloadBook($event, edition, 'epub')">EPUB</p></div>
              </div>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
  </ion-grid>
</div>

<div *ngIf="layoutType == 'grid'">
  <ion-grid>
    <ion-row>
      <ion-col style="display: flex;
            justify-content: center;" *ngFor="let edition of digitalEditions" menuClose
        (click)="openCollection(edition, false)" col-md-6 col-lg-4 col-xl-3>
        <ion-card class="digital-edition" style="padding: 20px; position: relative;">
          <ion-card-header class="digital-edition-list-card-header">
            <img
              src="{{editionImages[edition.id] ? (editionImages[edition.id]).replace('.','_thumb.') : (editionImages.default).replace('.','_thumb.')}}" loading="lazy">
            <ion-icon class="download" *ngIf="edition.isDownload" name="download">
            </ion-icon>
          </ion-card-header>
          <ion-card-content class="digital-edition-list-card-content">
            <div style="background-color: white; text-align: center;">
              <h2>{{ ('TOC-translation.' + edition.title | translate) !== 'TOC-translation.' + edition.title  ?  ('TOC-translation.' + edition.title | translate) : edition.title }}</h2>
              <div class="book_download_container">
                <div class="download_link"><p class="download_pdf" *ngIf="edition['pdf']" (click)="downloadBook($event, edition, 'pdf')">PDF</p></div>
                <div class="download_link"><p class="download_epub" *ngIf="edition['epub']" (click)="downloadBook($event, edition, 'epub')">EPUB</p></div>
              </div>
            </div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</div>

<div *ngIf="layoutType == 'list'">
  <ion-grid>
    <ion-row
      *ngIf="userSettingsService.isDesktop() && !userSettingsService.isTablet() && !userSettingsService.isMobile()">
      <ion-col class="front-page-list">
        <ion-list class="item-white" margin>
          <ion-item *ngFor="let edition of digitalEditionsFirstHalf" menuClose (click)="openCollection(edition, true)">
            <ion-thumbnail item-left>
              <img
                src="{{editionImages[edition.id] ? (editionImages[edition.id]).replace('.','_thumb.') : (editionImages.default).replace('.','_thumb.')}}" loading="lazy">
              <ion-icon class="download" *ngIf="edition.isDownload"
                name="download"></ion-icon>
            </ion-thumbnail>
            <h2>{{ ('TOC-translation.' + edition.title | translate) !== 'TOC-translation.' + edition.title  ?  ('TOC-translation.' + edition.title | translate) : edition.title }}</h2>
            <div class="book_download_container">
                <div class="download_link"><p class="download_pdf" *ngIf="edition['pdf']" (click)="downloadBook($event, edition, 'pdf')">PDF</p></div>
                <div class="download_link"><p class="download_epub" *ngIf="edition['epub']" (click)="downloadBook($event, edition, 'epub')">EPUB</p></div>
              </div>
          </ion-item>
        </ion-list>
      </ion-col>
      <ion-col class="front-page-list">
        <ion-list class="item-white" margin>
          <ion-item *ngFor="let edition of digitalEditionsSecondHalf" menuClose (click)="openCollection(edition, true)">
            <ion-thumbnail item-left>
              <img
                src="{{editionImages[edition.id] ? (editionImages[edition.id]).replace('.','_thumb.') : (editionImages.default).replace('.','_thumb.')}}" loading="lazy">
              <ion-icon class="download" *ngIf="edition.isDownload"
                name="download"></ion-icon>
            </ion-thumbnail>
            <h2>{{ ('TOC-translation.' + edition.title | translate) !== 'TOC-translation.' + edition.title  ?  ('TOC-translation.' + edition.title | translate) : edition.title }}</h2>
            <div class="book_download_container">
                <div class="download_link"><p class="download_pdf" *ngIf="edition['pdf']" (click)="downloadBook($event, edition, 'pdf')">PDF</p></div>
                <div class="download_link"><p class="download_epub" *ngIf="edition['epub']" (click)="downloadBook($event, edition, 'epub')">EPUB</p></div>
              </div>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="userSettingsService.isMobile() || userSettingsService.isTablet()">
      <ion-col>
        <ion-list class="item-white" margin>
          <ion-item *ngFor="let edition of digitalEditions" menuClose (click)="openCollection(edition, true)">
            <ion-thumbnail item-left>
              <img
                src="{{editionImages[edition.id] ? (editionImages[edition.id]).replace('.','_thumb.') : (editionImages.default).replace('.','_thumb.')}}" loading="lazy">
              <ion-icon class="download" *ngIf="edition.isDownload"
                name="download"></ion-icon>
            </ion-thumbnail>
            <h2>{{ ('TOC-translation.' + edition.title | translate) !== 'TOC-translation.' + edition.title  ?  ('TOC-translation.' + edition.title | translate) : edition.title }}</h2>
           <div class="book_download_container">
                <div class="download_link"><p class="download_pdf" *ngIf="edition['pdf']" (click)="downloadBook($event, edition, 'pdf')">PDF</p></div>
                <div class="download_link"><p class="download_epub" *ngIf="edition['epub']" (click)="downloadBook($event, edition, 'epub')">EPUB</p></div>
              </div>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
  </ion-grid>
</div>
-->
